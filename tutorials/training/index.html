<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/bitstream-hackathon/libs/highlight/github.min.css"> <link rel=stylesheet  href="/bitstream-hackathon/css/jtd.css"> <link rel=icon  href="/bitstream-hackathon/assets/favicon.ico"> <title>Training Tutorial</title> <div class=page-wrap > <div class=side-bar > <!-- <div class=header > <a href="/bitstream-hackathon/" class=title > <img src="/bitstream-hackathon/assets/pharm_homepage.pdf"> </a> </div> --> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item " style="margin-bottom: 30px;"><a href="/bitstream-hackathon/" class="menu-list-link ">Home</a> <li class="menu-list-item active">Tutorials <ul class=menu-list-child-list > <li class="menu-list-item "><a href="/bitstream-hackathon/tutorials/pruning/" class="menu-list-link ">Pruning</a> </ul> </ul> </div> <div class=footer > This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target=_blank >Jekyll theme</a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <span style="padding-right: 250px;"> <img src="/bitstream-hackathon/assets/red-flush-UWlogo.pdf" width=150px > <img src="/bitstream-hackathon/assets/pharm_homepage.pdf" width=175px  style="padding-bottom: 10px;"> </span> <a id=github  href="/bitstream-hackathon//github.com/UW-PHARM/BitSAD.jl">BitSAD.jl on GitHub</a> </div> <div class=franklin-content ><h1 id=training_tutorial ><a href="#training_tutorial" class=header-anchor >Training tutorial</a></h1> <pre><code class="plaintext code-output">UndefVarError: VisualWakeWords not defined
</code></pre> <p>how to do data augmentation rotate<em>range 10 degrees &#40;i.e. random &#91;-10, 10&#93;&#41; width</em>shift<em>range 0.05 height</em>shift_range 0.05 zoom range 0.1 &#40;i.e random &#91;0.9, 1.1&#93;&#41; horizontal flip True rescale 1/255</p> <pre><code class=language-julia >augmentations &#61; Rotate&#40;10&#41; |&gt;
                RandomTranslate&#40;&#40;96, 96&#41;, &#40;0.05, 0.05&#41;&#41; |&gt;
                Zoom&#40;&#40;0.9, 1.1&#41;&#41; |&gt;
                ScaleFixed&#40;&#40;96, 96&#41;&#41; |&gt;
                Maybe&#40;FlipX&#40;&#41;&#41; |&gt;
                CenterCrop&#40;&#40;96, 96&#41;&#41; |&gt;
                ImageToTensor&#40;&#41;
trainaug &#61; map_augmentation&#40;augmentations, traindata&#41;
valaug &#61; map_augmentation&#40;ImageToTensor&#40;&#41;, valdata&#41;
;

# model definition

m &#61; MobileNet&#40;relu, 0.25; fcsize &#61; 64, nclasses &#61; 2&#41;

# data loaders

bs &#61; 32
trainloader &#61; DataLoader&#40;BatchView&#40;trainaug; batchsize &#61; bs&#41;, nothing; buffered &#61; true&#41;
valloader &#61; DataLoader&#40;BatchView&#40;valaug; batchsize &#61; 2 * bs&#41;, nothing; buffered &#61; true&#41;
;

# training setup

lossfn &#61; Flux.Losses.logitcrossentropy</code></pre><pre><code class="plaintext code-output">UndefVarError: Rotate not defined
</code></pre> <p>define schedule and optimizer</p> <pre><code class=language-julia >es &#61; length&#40;trainloader&#41;
schedule &#61; Interpolator&#40;Step&#40;0.001, 0.5, &#91;20, 10, 20&#93;&#41;, es&#41;
optim &#61; Flux.ADAM&#40;0.001&#41;</code></pre><pre><code class="plaintext code-output">UndefVarError: trainloader not defined
</code></pre> <p>callbacks</p> <pre><code class=language-julia >logger &#61; TensorBoardBackend&#40;&quot;tblogs&quot;&#41;
schcb &#61; Scheduler&#40;LearningRate &#61;&gt; schedule&#41;
hlogcb &#61; LogHyperParams&#40;logger&#41;
mlogcb &#61; LogMetrics&#40;logger&#41;
valcb &#61; Metrics&#40;Metric&#40;accuracy; phase &#61; ValidationPhase&#41;&#41;</code></pre><pre><code class="plaintext code-output">UndefVarError: TensorBoardBackend not defined
</code></pre> <p>setup learner object</p> <pre><code class=language-julia >learner &#61; Learner&#40;m, lossfn;
                  data &#61; &#40;trainloader, valloader&#41;,
                  optimizer &#61; optim,
                  callbacks &#61; &#91;schcb, hlogcb, mlogcb, valcb&#93;&#41;

# train model

FluxTraining.fit&#33;&#40;learner, 2&#41;</code></pre><pre><code class="plaintext code-output">UndefVarError: trainloader not defined
</code></pre> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> UW-Madison PHARM Group. Last modified: April 06, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div> <!-- end of class page-wrap--> <script src="/bitstream-hackathon/libs/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: ' '});</script>